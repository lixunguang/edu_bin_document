import{a as X,b as w,g as Y,_ as j}from"./index.d653939b.js";/* empty css                *//* empty css                *//* empty css               *//* empty css              *//* empty css               */import{d as G,e as h,bc as Q,aF as A,aV as W,bq as Z,br as ee,B as i,C as B,F as a,aN as V,aI as o,aH as t,aK as S,aJ as M,aM as z,a$ as te,aY as oe,bd as ne,bh as se,bi as ue,b8 as ae,aD as b,aE as N,b9 as le,ba as re}from"./arco.2e067c42.js";import{C as ce}from"./index.6c809d25.js";import{h as ie}from"./vue.845af46b.js";import"./chart.7a528341.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                */const d=y=>(le("data-v-fc1bb7d1"),y=y(),re(),y),de={class:"main"},_e=["innerHTML"],pe=d(()=>a("h4",null,"\u70B9\u51FB\u4E0B\u9762\u94FE\u63A5\uFF0C\u8FDB\u5165\u505A\u5B9E\u9A8C\u9875\u9762:",-1)),fe=d(()=>a("a",{href:"IBESimdroidAutoSim://"},"\u70B9\u51FB\u8FD9\u91CC\uFF0C\u6253\u5F00ibe\u6587\u4EF6\u505A\u5B9E\u9A8C",-1)),me=d(()=>a("h4",null,"\u672C\u8282\u4F5C\u4E1A:",-1)),ge=d(()=>a("h4",null,"\u8981\u6C42:",-1)),he=d(()=>a("p",null,"\u8BF7\u6839\u636E\u4E0B\u5217\u6587\u6863\u4E2D\u7684\u8981\u6C42\u5B8C\u6210\u4F5C\u4E1A\u3002",-1)),ve=d(()=>a("p",null,"1.0MB",-1)),we=["href"],be=d(()=>a("h4",null,"\u8BF4\u660E:",-1)),ye=["innerHTML"],Ee=d(()=>a("h4",null,"\u63D0\u4EA4\u4F5C\u4E1A:",-1)),ke=d(()=>a("h4",null,"\u6750\u6599:",-1)),Ce=d(()=>a("h4",null,"\u5907\u6CE8\uFF1A",-1)),Be=G({__name:"index",setup(y){const v=ie(),D=h();(async function(){try{const e={id:Number(v.params.lessonId)},s=await w.post("/edu/v1/course/lesson/overview",e);D.value=s.data}catch(e){throw console.log(e),e}})();const I=h([]);(async function(){try{const e={id:Number(v.params.lessonId)},s=await w.post("/edu/v1/course/lesson/content",e);I.value=s.data}catch(e){throw console.log(e),e}})();const q=h([]);(async function(){try{const e={id:Number(v.params.lessonId)},s=await w.post("/edu/v1/course/lesson/refer",e);q.value=s.data}catch(e){throw console.log(e),e}})();const L=h();(async function(){try{const e={id:Number(v.params.lessonId)},s=await w.post("/edu/v1/course/lesson/experiment",e);L.value=s.data}catch(e){throw console.log(e),e}})();const F=h();(async function(){try{const e={id:Number(v.params.lessonId)},s=await w.post("/edu/v1/course/lesson/work",e);F.value=s.data}catch(e){throw console.log(e),e}})();const $=h(),R=X(),_=h([]),E=h({word:"\u8001\u5E08\u597D..."}),T=async function(){try{const e={lesson_id:Number(v.params.lessonId),login_id:String(R.$state.login_id)},s=await w.post("/edu/v1/course/lesson/work/commit",e);$.value=s.data,_.value=[];for(let n=0;n<s.data.work_commit_files.length;n+=1){const p=s.data.work_commit_files[n].file_name.split("/");_.value.push({uid:s.data.work_commit_files[n].content_id,name:p[p.length-1],url:s.data.work_commit_files[n].file_url})}E.value.word=s.data.work_commit_message}catch(e){throw console.log(e),e}};T();const P=e=>{const{onProgress:s,onError:n,onSuccess:p,fileItem:u,name:f}=e,l=new XMLHttpRequest;l.upload&&(l.upload.onprogress=function(m){let c;m.total>0&&(c=m.loaded/m.total),s(c,m)}),l.onerror=function(c){n(c)},l.onload=function(){if(l.status<200||l.status>=300)return n(l.responseText);debugger;const c=JSON.parse(l.responseText),C=c.data[0].url.split("/");return _.value.push({uid:c.data[0].id,name:C[C.length-1],url:c.data[0].url}),p(l.response)};const k=new FormData,x=String(Y());return k.append(f||"file",u.file),l.open("post","/edu/v1/upload_files",!0),l.setRequestHeader("Authorization",x),l.send(k),{abort(){l.abort()}}},U=e=>{const{uid:s}=e;for(let n=0;n<_.value.length;n+=1)Number(_.value[n].uid)===Number(s)&&_.value.splice(n,1);return new Promise((n,p)=>{te.confirm({title:"on-before-remove",content:`\u786E\u8BA4\u5220\u9664 ${e.name}`,onOk:()=>n(!0),onCancel:()=>p(new Error("cancel"))})})},J=async function(){try{const e={login_id:String(R.$state.login_id),lesson_id:Number(v.params.lessonId),work_commit_files:[{content_id:0}],work_commit_message:E.value.word};e.work_commit_files.splice(0,1);for(let n=0;n<_.value.length;n+=1)e.work_commit_files.push({content_id:Number(_.value[n].uid)});const s=await w.post("/edu/v1/course/lesson/work/commit/add",e);T(),oe.info({content:"\u63D0\u4EA4\u6210\u529F",duration:5*1e3})}catch(e){throw console.log(e),e}};return(e,s)=>{var H;const n=ne,p=Q,u=se,f=ue,l=A("icon-file"),k=A("icon-file-pdf"),x=A("icon-language"),m=W,c=ae,C=Z,O=ee;return i(),B("div",de,[a("h3",null,V((H=D.value)==null?void 0:H.lesson_title),1),o(p,{"default-active-key":"1",size:"large","lazy-load":""},{default:t(()=>[o(n,{key:"1",title:"\u6559\u5B66\u5185\u5BB9","lazy-load":""},{default:t(()=>[o(p,{"default-active-key":0,size:"medium"},{default:t(()=>[(i(!0),B(S,null,M(I.value,(r,g)=>(i(),b(n,{key:g,title:r.title},{default:t(()=>[a("div",null,[a("p",{innerHTML:r==null?void 0:r.content},null,8,_e)])]),_:2},1032,["title"]))),128))]),_:1})]),_:1}),o(n,{key:"2",title:"\u6559\u5B66\u53C2\u8003\u8D44\u6E90"},{default:t(()=>[a("div",null,[(i(!0),B(S,null,M(q.value,(r,g)=>(i(),b(ce,{key:g,url:r.content,title:r.title},null,8,["url","title"]))),128))])]),_:1}),o(n,{key:"3",title:"\u505A\u5B9E\u9A8C"},{default:t(()=>[a("div",null,[o(f,null,{default:t(()=>[pe,o(u,null,{default:t(()=>[fe]),_:1})]),_:1})])]),_:1}),o(n,{key:"4",title:"\u63D0\u4EA4\u4F5C\u4E1A"},{default:t(()=>[a("div",null,[o(f,null,{default:t(()=>{var r;return[o(u,null,{default:t(()=>[me]),_:1}),o(u,{offset:1,span:22},{default:t(()=>[ge]),_:1}),o(u,{offset:2,span:20},{default:t(()=>[he]),_:1}),(i(!0),B(S,null,M((r=F.value)==null?void 0:r.content,(g,K)=>(i(),b(u,{key:K,span:12,offset:2},{default:t(()=>[o(f,null,{default:t(()=>[g.content_type==2?(i(),b(u,{key:0,span:2},{default:t(()=>[o(l,{style:{fontSize:"32px"}})]),_:1})):N("",!0),g.content_type==3?(i(),b(u,{key:1,span:2},{default:t(()=>[o(k,{style:{fontSize:"32px"}})]),_:1})):N("",!0),g.content_type==7?(i(),b(u,{key:2,span:2},{default:t(()=>[o(x,{style:{fontSize:"32px"}})]),_:1})):N("",!0),o(u,{span:6},{default:t(()=>[a("p",null,V(g.title),1)]),_:2},1024),o(u,{span:5,offset:1},{default:t(()=>[ve]),_:1}),o(u,{span:5,offset:1,class:"ccc"},{default:t(()=>[a("a",{href:g.content},"\u4E0B\u8F7D",8,we)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]}),_:1}),o(f,null,{default:t(()=>[o(u,{offset:1,span:22},{default:t(()=>[be]),_:1}),o(u,{offset:2,span:20},{default:t(()=>{var r;return[a("p",{innerHTML:(r=F.value)==null?void 0:r.requirement},null,8,ye)]}),_:1})]),_:1})]),o(f,null,{default:t(()=>[o(u,null,{default:t(()=>[Ee]),_:1}),o(u,{offset:1,span:22},{default:t(()=>[ke]),_:1}),o(u,{offset:2,span:20},{default:t(()=>[o(f,null,{default:t(()=>[o(C,{"custom-request":P,"file-list":_.value,onBeforeRemove:U},{"upload-button":t(()=>[o(c,null,{default:t(()=>[o(m,{type:"primary"},{default:t(()=>[z(" \u4E0A\u4F20\u6587\u4EF6")]),_:1})]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1})]),_:1}),o(f,null,{default:t(()=>[o(u,{offset:1,span:22},{default:t(()=>[Ce]),_:1}),o(u,{offset:2,span:20},{default:t(()=>[o(O,{modelValue:E.value.word,"onUpdate:modelValue":s[0]||(s[0]=r=>E.value.word=r),placeholder:"Please enter something","allow-clear":"",style:{border:"1px solid blue"}},null,8,["modelValue"]),o(m,{type:"primary","html-type":"\u63D0\u4EA4",onClick:J},{default:t(()=>[z("\u63D0\u4EA4")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}});const Oe=j(Be,[["__scopeId","data-v-fc1bb7d1"]]);export{Oe as default};
