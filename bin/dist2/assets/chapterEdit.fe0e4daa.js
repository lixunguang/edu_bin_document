import{b as p,_ as D}from"./index.f3b0bd2a.js";/* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               */import{d as H,e as _,aW as L,bm as O,bi as U,b2 as T,b8 as j,C as z,aI as o,aG as t,aH as G,a$ as W,B as J,F,aM as i,bh as K,be as P,bj as Q,b3 as X,b9 as Y,ba as Z}from"./arco.be854816.js";import{f as ee,h as te}from"./vue.0bc632a1.js";import"./chart.cc2aed62.js";const ae=r=>(Y("data-v-92bbbabe"),r=r(),Z(),r),oe={class:"container"},se=ae(()=>F("p",null,"\u7AE0\u8282\u5217\u8868",-1)),ue={style:{marginLeft:"40px",marginRight:"40px"}},le=H({__name:"chapterEdit",setup(r){const E=ee(),m=te(),g=m.params.id,w=(u,e)=>{E.push({name:u,params:{courseId:g,chapterId:e}})},I={pageSize:10},x=[{title:"ID",dataIndex:"id"},{title:"\u6807\u9898",dataIndex:"name"},{title:"\u63CF\u8FF0",dataIndex:"desc"},{title:"\u4FEE\u6539",slotName:"edit",width:80},{title:"\u5220\u9664",slotName:"delete",width:80},{title:"\u7F16\u8F91\u8BE6\u60C5",slotName:"editMore",width:80}],d=_([]),c=_(!1),v=_(!1),a=_({id:1,name:"\u7B2C\u4E00\u8282",desc:"\u7B2C\u4E00\u8282\u63CF\u8FF0"});(async function(){var u;try{const e={id:Number(m.params.id)},n=await p.post("/admin/course/lesson/all",e);for(let s=0;s<((u=n.data)==null?void 0:u.length);s+=1)d.value.push({id:n.data[s].id,name:n.data[s].title,desc:n.data[s].desc})}catch(e){throw console.log(e),e}})();const k=()=>{c.value=!0,v.value=!0},B=(u,e,n)=>{c.value=!0,v.value=!1,a.value.id=u,a.value.desc=n,a.value.name=e},y=async function(u){var n;for(let s=0;s<((n=d.value)==null?void 0:n.length);s+=1)d.value[s].id===u&&d.value.splice(s,1);const e={course_id:Number(m.params.id),lesson_id:Number(u)};await p.post("/admin/course/lesson/del",e)},N=async function(){if(v.value){const u={course_id:Number(m.params.id),lesson_title:a.value.name,lesson_desc:a.value.desc},e=await p.post("/admin/course/lesson/add",u);debugger;const n=e.data.lesson_id;d.value.push({id:n,name:a.value.name,desc:a.value.desc})}else{for(let e=0;e<d.value.length;e+=1)d.value[e].id===a.value.id&&(d.value[e].name=a.value.name,d.value[e].desc=a.value.desc);const u={course_id:Number(m.params.id),lesson_id:a.value.id,title:a.value.name,desc:a.value.desc};await p.post("/admin/course/lesson/update",u)}c.value=!1},M=()=>{c.value=!1};return(u,e)=>{const n=G("Breadcrumb"),s=L,V=K,f=P,A=O,S=Q,$=U,b=T,h=X,q=j,R=W;return J(),z("div",oe,[o(n,{items:["menu.mSimu","menu.mSimu.chapterEdit"]},null,8,["items"]),o($,null,{default:t(()=>[o(S,null,{default:t(()=>[se,F("div",ue,[o(f,null,{default:t(()=>[o(V,{span:2},{default:t(()=>[o(s,{type:"primary",onClick:e[0]||(e[0]=l=>k())},{default:t(()=>[i(" \u589E\u52A0\u7AE0\u8282 ")]),_:1})]),_:1})]),_:1}),o(A,{columns:x,data:d.value,pagination:I},{pre:t(({})=>[o(s,null,{default:t(()=>[i("\u9884\u89C8")]),_:1})]),edit:t(({record:l})=>[o(s,{onClick:C=>B(l.id,l.name,l.desc)},{default:t(()=>[i("\u4FEE\u6539")]),_:2},1032,["onClick"])]),delete:t(({record:l})=>[o(s,{onClick:C=>u.$modal.info({title:"\u5220\u9664",content:l.id,onOk:()=>y(l.id)})},{default:t(()=>[i("\u5220\u9664")]),_:2},1032,["onClick"])]),editMore:t(({record:l})=>[o(s,{onClick:C=>w("SimuChapterDetailEdit",l.id)},{default:t(()=>[i("\u7F16\u8F91\u8BE6\u60C5")]),_:2},1032,["onClick"])]),_:1},8,["data"])])]),_:1})]),_:1}),o(R,{visible:c.value,"onUpdate:visible":e[3]||(e[3]=l=>c.value=l),onOk:N,onCancel:M},{title:t(()=>[i(" \u65B0\u589E/\u7F16\u8F91\u7AE0\u8282\u57FA\u672C\u4FE1\u606F ")]),default:t(()=>[o(f,null,{default:t(()=>[i("\u7AE0\u8282\u57FA\u672C\u4FE1\u606F")]),_:1}),o(q,{model:a.value,"auto-label-width":""},{default:t(()=>[o(h,{field:"title",label:"\u6807\u9898"},{default:t(()=>[o(b,{modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.name=l),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(h,{field:"title",label:"\u63CF\u8FF0"},{default:t(()=>[o(b,{modelValue:a.value.desc,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.desc=l),style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])])}}});const ge=D(le,[["__scopeId","data-v-92bbbabe"]]);export{ge as default};
